<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>孩子你是不是傻？</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #first{
            width: 100px;
            height:100px;
            background-color: green;
            position: absolute;

        }
        #second{
            width: 100px;
            height: 100px;
            background-color: blue;
            position: absolute;
            left: 300px;
            top: 300px;
        }
    </style>
</head>
<body>
     <div id="first"></div>
     <div id="second"></div>
</body>

<script>
    const first = document.querySelector('#first');
    const second = document.querySelector('#second');

    // 判断距离
    function collision (obj1, obj2) {
      let minX = obj2.offsetLeft - obj1.offsetWidth;
      let maxX = obj2.offsetLeft + obj2.offsetWidth;
      let minY = obj2.offsetTop - obj1.offsetHeight;
      let maxY = obj2.offsetTop + obj2.offsetHeight;
      if(obj1.offsetLeft >= minX && obj1.offsetLeft <= maxX && obj1.offsetTop >= minY && obj1.offsetTop <= maxY) {
        //obj2.style.backgroudColor='red';
        rightCall()
      } else {
        falseCall()
      }
    }

    // 移动函数
    function move (moveObj, endObj) {
      moveObj.onmousedown = function (e) {
        var ev = e || window.event;
        let current_x = ev.offsetX;
        let current_y = ev.offsetY;
        document.onmousemove = function (e) {
          var ev = e || window.event;
          let off_x = ev.clientX;
          let off_y = ev.clientY;
          moveObj.style.left = off_x - current_x + 'px';
          moveObj.style.top = off_y - current_y + 'px';
          collision(moveObj, endObj);
        };
        document.onmouseup = function () {
          document.onmousemove = null;
        }
      }
    }

    // 函数执行
    move(first, second)

    // 声明不变量 rightCall 接触时改变颜色
    const rightCall = function () {
      first.style.background='gold';
      second.style.background='red';
    }

    // 声明不变量 falseCall 把颜色改变回来
    const falseCall = function () {
      first.style.background='green';
      second.style.background='blue';
    } 
</script>